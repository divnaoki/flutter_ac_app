# アクセシブルメディアアプリ開発タスクリスト

## 📅 8月第1週までのスケジュール

### 第1週（7/8-7/14）: 基盤構築
- [x] 🔴 プロジェクト初期設定
  - [x] 必要なライブラリの追加（pubspec.yaml更新）
  - [x] データベース設計（Drift）の実装
  - [x] 基本的なディレクトリ構造の作成
  - [x] Riverpodの初期設定

### 第2週（7/15-7/21）: データベース・状態管理
- [x] 🟡 データベース実装
  - [x] Driftテーブル定義（categories, images, videos）
  - [x] DAOクラスの実装
  - [x] データベース接続・初期化
- [x] 🟡 状態管理実装
  - [x] Riverpodプロバイダーの設定
  - [x] 基本的なCRUD操作の実装

### 第3週（7/22-7/28）: 画面実装（前半）
- [x] 🟡 ルーティング設定
  - [x] go_routerの設定
  - [x] 基本的な画面遷移の実装
- [x] 🟡 ホーム画面・カテゴリ管理
  - [x] ホーム画面（カテゴリ一覧）の実装
  - [x] カテゴリ追加・編集・削除機能
  - [x] カテゴリ詳細画面の実装

### 第4週（7/29-8/4）: 画面実装（後半）
- [x] 🟡 メディア管理機能
  - [x] 画像一覧・詳細画面の実装
  - [x] 動画一覧・再生画面の実装
  - [x] ファイル選択機能の実装
- [x] 🟡 TTS機能の実装
  - [x] 画像名の音声読み上げ機能
  - [x] 動画再生完了後の自動戻り機能

### 第5週（8/5-8/11）: 最終調整・テスト
- [ ] 🟢 統合テスト・デバッグ
  - [ ] 全機能の動作確認
  - [ ] エラーハンドリングの改善
  - [ ] UI/UXの最終調整
- [ ] 🟢 ドキュメント作成
  - [ ] 使用方法の説明
  - [ ] 技術仕様書の整理

---

## 📋 詳細タスク

### 🔴 緊急タスク（第1週必須：7/8-7/14）

#### プロジェクト初期設定
- [x] pubspec.yamlに必要なライブラリを追加
  - [x] drift, drift_dev, sqlite3_flutter_libs
  - [x] file_picker
  - [x] path, path_provider
  - [x] flutter_tts
  - [x] video_player
  - [x] flutter_riverpod
  - [x] go_router
  - [x] flutter_feather_icons（モダンUI用）

- [x] ディレクトリ構造の作成
  ```
  lib/
  ├─ data/
  │ ├─ database.dart
  │ ├─ tables/
  │ │ ├─ category.dart
  │ │ ├─ image.dart
  │ │ └─ video.dart
  │ └─ daos/
  │ ├─ category_dao.dart
  │ ├─ image_dao.dart
  │ └─ video_dao.dart
  ├─ providers/
  ├─ screens/
  ├─ widgets/
  └─ utils/
  ```

- [x] データベース設計（Drift）の実装
  - [x] Driftテーブル定義（categories, images, videos）
  - [x] DAOクラスの実装
  - [x] データベース接続・初期化

- [x] Riverpodの初期設定
  - [x] データベースプロバイダー
  - [x] DAOプロバイダー
  - [x] カテゴリ管理プロバイダー
  - [x] 画像管理プロバイダー
  - [x] 動画管理プロバイダー

### 🟡 重要タスク（第2-4週：7/15-8/4）

#### データベース実装
- [x] Driftテーブル定義
  - [x] categoriesテーブル（id, name, created_at, updated_at）
  - [x] imagesテーブル（id, name, image_path, category_id, created_at, updated_at）
  - [x] videosテーブル（id, name, video_path, category_id, created_at, updated_at）

- [x] DAOクラス実装
  - [x] CategoryDao（CRUD操作）
  - [x] ImageDao（CRUD操作）
  - [x] VideoDao（CRUD操作）

#### 状態管理実装
- [x] Riverpodプロバイダー
  - [x] カテゴリ管理プロバイダー
  - [x] 画像管理プロバイダー
  - [x] 動画管理プロバイダー

#### 画面実装
- [x] ルーティング設定
  - [x] go_routerの基本設定
  - [x] 各画面へのルート定義
  - [x] 基本的な画面クラスの作成

- [x] ホーム画面
  - [x] カテゴリ一覧表示
  - [x] カテゴリ追加ボタン
  - [x] カテゴリ編集・削除機能

- [x] カテゴリ詳細画面
  - [x] 画像・動画一覧への分岐
  - [x] カテゴリ情報表示

- [x] 画像管理画面
  - [x] 画像一覧表示
  - [x] 画像追加機能
  - [x] 画像詳細画面（TTS読み上げ）
  - [x] 画像編集・削除機能

- [x] 動画管理画面
  - [x] 動画一覧表示
  - [x] 動画追加機能
  - [x] 動画再生画面
  - [x] 動画編集・削除機能

#### 機能実装
- [x] ファイル選択機能
  - [x] file_pickerを使用した画像選択
  - [x] file_pickerを使用した動画選択
  - [x] ローカルストレージへの保存

- [x] TTS機能
  - [x] flutter_ttsの初期化
  - [x] 画像名の音声読み上げ
  - [x] 言語設定（日本語）

- [x] 動画再生機能
  - [x] video_playerの初期化
  - [x] 動画再生・停止・シーク機能
  - [x] 再生完了後の自動戻り

### 🟢 通常タスク（第5週：8/5-8/11）

#### テスト・デバッグ
- [ ] 全機能の動作確認
  - [ ] カテゴリのCRUD操作
  - [ ] 画像のCRUD操作
  - [ ] 動画のCRUD操作
  - [ ] TTS機能の動作確認
  - [ ] 動画再生機能の動作確認

- [ ] エラーハンドリング
  - [ ] ファイル読み込みエラー
  - [ ] データベースエラー
  - [ ] TTSエラー
  - [ ] 動画再生エラー

#### UI/UX改善
- [ ] モダンなアイコンの適用
- [ ] レスポンシブデザインの調整
- [ ] アクセシビリティの向上

### ⚪ 低優先タスク（時間があれば）

- [ ] パフォーマンス最適化
- [ ] アニメーション追加
- [ ] テーマカスタマイズ
- [ ] 設定画面の追加

---

## 📊 進捗管理

### 週次チェックポイント
- [ ] 第1週末（7/14）：基盤構築完了確認
- [ ] 第2週末（7/21）：データベース・状態管理完了確認
- [ ] 第3週末（7/28）：基本画面実装完了確認
- [ ] 第4週末（8/4）：全機能実装完了確認
- [ ] 第5週末（8/11）：最終テスト・リリース準備完了

### リスク管理
- [ ] 技術的課題の早期発見
- [ ] スケジュール遅延の対策
- [ ] 品質保証の徹底

---

## 🎯 成功指標

- [ ] 8月第1週までに全機能が動作するアプリの完成
- [ ] ChromeBookでのオフライン動作確認
- [ ] 基本的なCRUD操作の正常動作
- [ ] TTS・動画再生機能の正常動作
- [ ] モダンなUI/UXの実現 

## 重要事項

1. 機能の実装後に、毎回 @todo.md を確認＆更新をしてください。
2. 私が言わなくても中身は随時更新するようにしてください。更新しないと私が解雇されます。あなたの責任になってしまいます。
3. 機能は増やしても構いません。ただ、最初から機能を増やしすぎないでください。
4. file_pickerのデスクトップ向け警告（pluginClass未定義等）は現状無視してOK。致命的な問題が出た場合のみ対応を検討すること。 

- 【重要】データベース構造（テーブル定義等）を変更した場合、DriftのMigrationStrategyを必ず実装すること。未対応の場合、アプリ起動時にエラーとなる。
- 開発中は、DB構造変更時にアプリのアンインストールやDBファイル削除で初期化する手順もREADME等に明記すること。 

- ルーティングや画面遷移の不具合が発生した場合、アプリのフルリスタート（完全再起動）を試すこと。ホットリロードではルート定義の変更が反映されない場合がある。
- Flutter/iOSのローカルネットワーク権限エラー（FlutterDartVMServicePublisher関連）は、通常のアプリ動作には影響しない。デバッグ機能の一部のみ制限される。 

- 動画登録・一覧・再生機能を実装済み。動画一覧から動画を選択すると、動画再生ページに遷移し自動で再生される。 